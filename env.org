* set up docker environment
#+begin_src shell :results output silent :session pa11y-env
  mkdir -p ${HOME}/.cache/yarn
  touch ${HOME}/.yarnrc

  mkdir -p /usr/bin
  ln -s /home/jesse/.guix-profile/bin/env /usr/bin/env

  docker run -v "$(pwd):/home/node/workdir" \
         -v "${HOME}/.cache/yarn:/home/node/.cache/yarn" \
         -v "${HOME}/.yarnrc:/home/node/.yarnrc" \
         -v /etc/timezone:/etc/timezone:ro \
         -e "TZ=America/New_York" \
         --security-opt seccomp:/home/jesse/etc/docker/puppeteer.json \
         --net host \
         --name pa11y-env --rm -i -t reg.jcodelabs.com/node-puppeteer:latest bash


  #    -v /tmp/.X11-unix:/tmp/.X11-unix \
  #    -e "DISPLAY=unix${DISPLAY}" \

#+end_src
* pa11y env setup
#+begin_src shell :results output silent :session pa11y-env
  cd workdir
  export PATH=~/workdir/node_modules/.bin:"${PATH}"
#+end_src


#+begin_src shell :results output silent :session pa11y-env
	mkdir -p /usr/bin
	ln -s /home/jesse/.guix-profile/bin/env /usr/bin/env

	export PUPPETEER_SKIP_CHROMIUM_DOWNLOAD="true"
	# export PUPPETEER_PRODUCT="chrome"
	# #export PUPPETEER_EXECUTABLE_PATH=${HOME}/.guix-profile/bin/chromium
	# export PUPPETEER_EXECUTABLE_PATH=$(pwd)/runchrome.sh

	export PUPPETEER_PRODUCT="firefox"
	export PUPPETEER_EXECUTABLE_PATH=${HOME}/.guix-profile/bin/icecat

	export PATH=node_modules/.bin:"${PATH}"
#+end_src
